<?phpif (!defined('_PS_VERSION_'))    exit;class TDAjaxSearch extends Module {    public function __construct() {        $this->name = 'tdajaxsearch';        $this->tab = 'search_filter';        $this->version = '1.4'; //1.4 updated        $this->author = 'ThemesDeveloper';        $this->need_instance = 0;        parent::__construct();        $this->displayName = $this->l('ThemesDeveloper Quick Ajax Product Search');        $this->description = $this->l('Adds a quick Quick Ajax Product Search field to your website.');        $this->ps_versions_compliancy = array('min' => '1.6', 'max' => _PS_VERSION_);    }    public function install() {        if (!parent::install() || !$this->registerHook('top') || !$this->registerHook('header'))            return false;        return true;    }    public function hookHeader($params) {        if (Configuration::get('PS_SEARCH_AJAX'))            $this->context->controller->addJqueryPlugin('autocomplete');    }    public function hookTop($params) {        $key = $this->getCacheId('tdajaxsearch_top');        if (Tools::getValue('search_query') || !$this->isCached('tdajaxsearch_top.tpl', $key)) {            $this->calculHookCommon($params);            $this->smarty->assign(array(                'blocksearch_type' => 'top',                'search_query' => (string) Tools::getValue('search_query')                    )            );        }        Media::addJsDef(array('blocksearch_type' => 'top'));        return $this->display(__FILE__, 'tdajaxsearch_top.tpl', Tools::getValue('search_query') ? null : $key);    }    private function calculHookCommon($params) {        $this->smarty->assign(array(            'ENT_QUOTES' => ENT_QUOTES,            'search_ssl' => Tools::usingSecureMode(),            'ajaxsearch' => Configuration::get('PS_SEARCH_AJAX'),            'instantsearch' => Configuration::get('PS_INSTANT_SEARCH'),            'self' => dirname(__FILE__),            'pbaseurl' => _PS_BASE_URL_ . _THEME_PROD_DIR_,            'tdajaxsearchmod' => __PS_BASE_URI__ . 'modules/tdajaxsearch/tdajaxsearchAjax.php'        ));        return true;    }}